{"version":3,"sources":["webpack://_N_E/./src/utils/dispose-objects.js","webpack://_N_E/./node_modules/three/examples/jsm/shaders/DigitalGlitch.js","webpack://_N_E/./src/utils/threejs/GlitchPass.js","webpack://_N_E/./src/pages/ThreeCanvas.js"],"names":["disposeObjects","object","parent","undefined","remove","dispose","geometry","material","children","i","l","length","type","console","log","DigitalGlitch","uniforms","value","vertexShader","fragmentShader","dt_size","Pass","call","this","error","shader","clone","generateHeightmap","fsQuad","curF","prototype","Object","assign","create","constructor","render","renderer","writeBuffer","readBuffer","texture","Math","random","randX","randFloat","PI","generateTrigger","isActive","renderToScreen","setRenderTarget","clear","randInt","data_arr","Float32Array","val","activate","__jsx","createElement","inputEl","scene","camera","current","offsetWidth","offsetHeight","antialias","setPixelRatio","setSize","append","domElement","toneMapping","addEventListener","event","mouse","x","clientX","y","clientY","aspect","window","innerWidth","innerHeight","composer","updateProjectionMatrix","glitchPass","timer","INTERSECTED","begin","transitionBegin","redirect","userData","url","targetZ","wireframe","matLineBasic","titleShapes","enterShapes","titleGeometry","text","enterGeo","raycaster","directionalLight","groupThumb","groupFont","clock","matDark","color","side","matLite","transparent","opacity","idText","nameGeo","background","fog","add","position","set","load","font","generateShapes","computeBoundingBox","xMid","boundingBox","max","min","translate","push","z","enterText","holeShapes","_i","shape","holes","j","hole","apply","lineText","_i2","points","getPoints","lineGeo","setFromPoints","lineMesh","mesh","map","isSelected","id","geo","computeLineDistances","visible","rotateX","xLen","renderScene","RenderPass","bloomPass","UnrealBloomPass","EffectComposer","addPass","lookAt","init","animate","getDelta","location","href","cancelAnimationFrame","requestAnimationFrame","setFromCamera","intersects","intersectObjects","emissive","setHex","currentHex","emissiveIntensity","getHex","Fragment","ref"],"mappings":"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","file":"static/chunks/27.0333b300d7296a741f29.js","sourcesContent":["/**\n * Recursively dispose threejs objects\n *\n * @export\n * @param {Object3D} object\n * @param {(Scene | Object3D)} parent\n * @returns\n */\nexport default function disposeObjects(object, parent) {\n  if (object === null || object === undefined) return;\n  if (parent) parent.remove(object);\n\n  if (object.dispose) {\n    object.dispose();\n  }\n\n  if (object.geometry) {\n    object.geometry.dispose();\n  }\n\n  if (object.material) {\n    object.material.dispose();\n  }\n\n  if (object.children) {\n    var i = 0;\n    var l = object.children.length;\n\n    while (i < l) {\n      disposeObjects(object.children[0], object);\n      i++;\n    }\n  }\n\n  if (object.type === 'Scene') object.dispose();\n  object = null;\n  console.log('test');\n}","/**\n * RGB Shift Shader\n * Shifts red and blue channels from center in opposite directions\n * Ported from http://kriss.cx/tom/2009/05/rgb-shift/\n * by Tom Butterworth / http://kriss.cx/tom/\n *\n * amount: shift distance (1 is width of input)\n * angle: shift angle in radians\n */\nvar DigitalGlitch = {\n  uniforms: {\n    'tDiffuse': {\n      value: null\n    },\n    //diffuse texture\n    'tDisp': {\n      value: null\n    },\n    //displacement texture for digital glitch squares\n    'byp': {\n      value: 0\n    },\n    //apply the glitch ?\n    'amount': {\n      value: 0.08\n    },\n    'angle': {\n      value: 0.02\n    },\n    'seed': {\n      value: 0.02\n    },\n    'seed_x': {\n      value: 0.02\n    },\n    //-1,1\n    'seed_y': {\n      value: 0.02\n    },\n    //-1,1\n    'distortion_x': {\n      value: 0.5\n    },\n    'distortion_y': {\n      value: 0.6\n    },\n    'col_s': {\n      value: 0.05\n    }\n  },\n  vertexShader:\n  /* glsl */\n  \"\\n\\n\\t\\tvarying vec2 vUv;\\n\\t\\tvoid main() {\\n\\t\\t\\tvUv = uv;\\n\\t\\t\\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\\n\\t\\t}\",\n  fragmentShader:\n  /* glsl */\n  \"\\n\\n\\t\\tuniform int byp; //should we apply the glitch ?\\n\\n\\t\\tuniform sampler2D tDiffuse;\\n\\t\\tuniform sampler2D tDisp;\\n\\n\\t\\tuniform float amount;\\n\\t\\tuniform float angle;\\n\\t\\tuniform float seed;\\n\\t\\tuniform float seed_x;\\n\\t\\tuniform float seed_y;\\n\\t\\tuniform float distortion_x;\\n\\t\\tuniform float distortion_y;\\n\\t\\tuniform float col_s;\\n\\n\\t\\tvarying vec2 vUv;\\n\\n\\n\\t\\tfloat rand(vec2 co){\\n\\t\\t\\treturn fract(sin(dot(co.xy ,vec2(12.9898,78.233))) * 43758.5453);\\n\\t\\t}\\n\\n\\t\\tvoid main() {\\n\\t\\t\\tif(byp<1) {\\n\\t\\t\\t\\tvec2 p = vUv;\\n\\t\\t\\t\\tfloat xs = floor(gl_FragCoord.x / 0.5);\\n\\t\\t\\t\\tfloat ys = floor(gl_FragCoord.y / 0.5);\\n\\t\\t\\t\\t//based on staffantans glitch shader for unity https://github.com/staffantan/unityglitch\\n\\t\\t\\t\\tvec4 normal = texture2D (tDisp, p*seed*seed);\\n\\t\\t\\t\\tif(p.y<distortion_x+col_s && p.y>distortion_x-col_s*seed) {\\n\\t\\t\\t\\t\\tif(seed_x>0.){\\n\\t\\t\\t\\t\\t\\tp.y = 1. - (p.y + distortion_y);\\n\\t\\t\\t\\t\\t}\\n\\t\\t\\t\\t\\telse {\\n\\t\\t\\t\\t\\t\\tp.y = distortion_y;\\n\\t\\t\\t\\t\\t}\\n\\t\\t\\t\\t}\\n\\t\\t\\t\\tif(p.x<distortion_y+col_s && p.x>distortion_y-col_s*seed) {\\n\\t\\t\\t\\t\\tif(seed_y>0.){\\n\\t\\t\\t\\t\\t\\tp.x=distortion_x;\\n\\t\\t\\t\\t\\t}\\n\\t\\t\\t\\t\\telse {\\n\\t\\t\\t\\t\\t\\tp.x = 1. - (p.x + distortion_x);\\n\\t\\t\\t\\t\\t}\\n\\t\\t\\t\\t}\\n\\t\\t\\t\\tp.x+=normal.x*seed_x*(seed/5.);\\n\\t\\t\\t\\tp.y+=normal.y*seed_y*(seed/5.);\\n\\t\\t\\t\\t//base from RGB shift shader\\n\\t\\t\\t\\tvec2 offset = amount * vec2( cos(angle), sin(angle));\\n\\t\\t\\t\\tvec4 cr = texture2D(tDiffuse, p + offset);\\n\\t\\t\\t\\tvec4 cga = texture2D(tDiffuse, p);\\n\\t\\t\\t\\tvec4 cb = texture2D(tDiffuse, p - offset);\\n\\t\\t\\t\\tgl_FragColor = vec4(cr.r, cga.g, cb.b, cga.a);\\n\\t\\t\\t\\t//add noise\\n\\t\\t\\t\\tvec4 snow = 200.*amount*vec4(rand(vec2(xs * seed,ys * seed*50.))*0.2);\\n\\t\\t\\t\\tgl_FragColor = gl_FragColor+ snow;\\n\\t\\t\\t}\\n\\t\\t\\telse {\\n\\t\\t\\t\\tgl_FragColor=texture2D (tDiffuse, vUv);\\n\\t\\t\\t}\\n\\t\\t}\"\n};\nexport { DigitalGlitch };","import { DataTexture, FloatType, MathUtils, RGBFormat, ShaderMaterial, UniformsUtils } from 'three/build/three.module';\nimport { Pass } from 'three/examples/jsm/postprocessing/Pass.js';\nimport { FullScreenQuad } from 'three/examples/jsm/postprocessing/Pass.js';\nimport { DigitalGlitch } from 'three/examples/jsm/shaders/DigitalGlitch.js';\n\nvar GlitchPass = function GlitchPass(dt_size) {\n  Pass.call(this);\n  if (DigitalGlitch === undefined) console.error('GlitchPass relies on DigitalGlitch');\n  var shader = DigitalGlitch;\n  this.uniforms = UniformsUtils.clone(shader.uniforms);\n  if (dt_size === undefined) dt_size = 64;\n  this.uniforms['tDisp'].value = this.generateHeightmap(dt_size);\n  this.material = new ShaderMaterial({\n    uniforms: this.uniforms,\n    vertexShader: shader.vertexShader,\n    fragmentShader: shader.fragmentShader\n  });\n  this.fsQuad = new FullScreenQuad(this.material);\n  this.curF = 0;\n};\n\nGlitchPass.prototype = Object.assign(Object.create(Pass.prototype), {\n  constructor: GlitchPass,\n  render: function render(renderer, writeBuffer, readBuffer\n  /*, deltaTime, maskActive */\n  ) {\n    this.uniforms['tDiffuse'].value = readBuffer.texture;\n    this.uniforms['seed'].value = Math.random(); //default seeding\n\n    this.uniforms['byp'].value = 0;\n\n    if (this.curF % this.randX === 0) {\n      this.uniforms['amount'].value = Math.random() / 30;\n      this.uniforms['angle'].value = MathUtils.randFloat(-Math.PI, Math.PI);\n      this.uniforms['seed_x'].value = MathUtils.randFloat(-1, 1);\n      this.uniforms['seed_y'].value = MathUtils.randFloat(-1, 1);\n      this.uniforms['distortion_x'].value = MathUtils.randFloat(0, 1);\n      this.uniforms['distortion_y'].value = MathUtils.randFloat(0, 1);\n      this.curF = 0;\n      this.generateTrigger();\n    } else if (this.curF % this.randX < this.randX / 5) {\n      //console.log('is active2');\n      this.isActive = true;\n      this.uniforms['amount'].value = Math.random() / 90;\n      this.uniforms['angle'].value = MathUtils.randFloat(-Math.PI, Math.PI);\n      this.uniforms['distortion_x'].value = MathUtils.randFloat(0, 1);\n      this.uniforms['distortion_y'].value = MathUtils.randFloat(0, 1);\n      this.uniforms['seed_x'].value = MathUtils.randFloat(-0.3, 0.3);\n      this.uniforms['seed_y'].value = MathUtils.randFloat(-0.3, 0.3);\n      this.curF++;\n    } else {\n      this.uniforms['byp'].value = 1;\n    }\n\n    if (this.renderToScreen) {\n      renderer.setRenderTarget(null);\n      this.fsQuad.render(renderer);\n    } else {\n      renderer.setRenderTarget(writeBuffer);\n\n      if (this.clear) {\n        renderer.clear();\n      }\n\n      this.fsQuad.render(renderer);\n    }\n  },\n  generateTrigger: function generateTrigger() {\n    this.randX = MathUtils.randInt(120, 240);\n  },\n  generateHeightmap: function generateHeightmap(dt_size) {\n    var data_arr = new Float32Array(dt_size * dt_size * 3);\n    var length = dt_size * dt_size;\n\n    for (var i = 0; i < length; i++) {\n      var val = MathUtils.randFloat(0, 1);\n      data_arr[i * 3 + 0] = val;\n      data_arr[i * 3 + 1] = val;\n      data_arr[i * 3 + 2] = val;\n    }\n\n    return new DataTexture(data_arr, dt_size, dt_size, RGBFormat, FloatType);\n  },\n  activate: function activate() {\n    this.curF = 1;\n    this.generateTrigger();\n  }\n});\nexport { GlitchPass };","var __jsx = React.createElement;\nimport React, { useRef, useEffect } from 'react';\nimport { Color, Fog, AmbientLight, Scene, Clock, Vector2, PerspectiveCamera, BoxGeometry, Mesh, Group, WebGLRenderer, Vector3, DirectionalLight, TextureLoader, Raycaster, MeshLambertMaterial, PlaneGeometry, WireframeGeometry, LineBasicMaterial, LineSegments, ReinhardToneMapping, Line, BufferGeometry, Object3D, ShapeGeometry, DoubleSide, FontLoader, MeshBasicMaterial } from 'three/build/three.module';\nimport { RenderPass } from 'three/examples/jsm/postprocessing/RenderPass.js';\nimport { EffectComposer } from 'three/examples/jsm/postprocessing/EffectComposer.js';\nimport { UnrealBloomPass } from 'three/examples/jsm/postprocessing/UnrealBloomPass.js';\nimport { GlitchPass } from '../utils/threejs/GlitchPass.js';\nimport disposeObjects from '../utils/dispose-objects';\nconsole.log(GlitchPass);\n\nfunction Art() {\n  var inputEl = useRef(null);\n  useEffect(function () {\n    return function () {\n      require('../utils/dispose-objects');\n\n      disposeObjects(inputEl.renderer, inputEl);\n    };\n  }, []);\n  useEffect(function () {\n    var scene = new Scene();\n    var camera = new PerspectiveCamera(75, inputEl.current.offsetWidth / inputEl.current.offsetHeight, 0.1, 1000);\n    var renderer = new WebGLRenderer({\n      antialias: true\n    });\n    renderer.setPixelRatio(inputEl.current.offsetWidth / inputEl.current.offsetHeight);\n    renderer.setSize(inputEl.current.offsetWidth, inputEl.current.offsetHeight);\n    inputEl.current.append(renderer.domElement);\n    renderer.toneMapping = ReinhardToneMapping;\n    inputEl.current.addEventListener('mousemove', onPointerMove);\n    inputEl.current.addEventListener('resize', onWindowResize);\n    inputEl.current.addEventListener('click', onMouseClick);\n    var raycaster = new Raycaster();\n    var directionalLight = new DirectionalLight(0xff00ff, 0.5);\n    var groupThumb = new Group();\n    var groupFont = new Group();\n    var mouse = new Vector2();\n    var INTERSECTED;\n    var wireframe;\n    var matLineBasic;\n    var composer;\n    var redirect;\n    var glitchPass = new GlitchPass();\n    var begin = false;\n    var clock = new Clock();\n    var timer = 0.55;\n    var transitionBegin = false;\n    var matDark = new LineBasicMaterial({\n      color: 0x006699,\n      side: DoubleSide\n    });\n    var matLite = new MeshBasicMaterial({\n      color: 0x08fbff,\n      transparent: true,\n      opacity: 0.4,\n      side: DoubleSide\n    });\n    var idText = ['A Thousand\\nSplendid Suns\\n//amna', 'MRN\\n//mariana', 'Kissing Circles\\n//mia'];\n    var titleText = 'WE3 \\nGallery';\n    var enterMessage = 'click anywhere to enter';\n    var titleShapes;\n    var enterShapes;\n    var titleGeometry;\n    var text;\n    var enterGeo;\n    var nameGeo = [];\n\n    function onWindowResize() {\n      camera.aspect = window.innerWidth / window.innerHeight;\n      renderer.setSize(window.innerWidth, window.innerHeight);\n      composer.setSize(window.innerWidth, window.innerHeight);\n      camera.updateProjectionMatrix();\n    }\n\n    function onMouseClick(event) {\n      glitchPass.activate();\n      console.log(timer);\n\n      if (INTERSECTED && begin && !transitionBegin) {\n        redirect = INTERSECTED.userData.url;\n        transitionBegin = true;\n      }\n\n      if (!INTERSECTED) {\n        redirect = null;\n      }\n\n      if (!begin) {\n        camera.userData.targetZ = 80;\n        begin = true;\n      }\n    }\n\n    function onPointerMove(event) {\n      mouse.x = event.clientX / inputEl.current.offsetWidth * 2 - 1;\n      mouse.y = -(event.clientY / inputEl.current.offsetHeight) * 2 + 1;\n    }\n\n    function animate() {\n      if (transitionBegin) {\n        timer -= clock.getDelta();\n      }\n\n      if (timer <= 0) {\n        window.location.href = redirect;\n        cancelAnimationFrame(this);\n      } else {\n        requestAnimationFrame(animate);\n        render();\n        composer.render();\n      }\n    }\n\n    function render() {\n      camera.position.x += (mouse.x - camera.position.x) * 0.5;\n      camera.position.y += (-mouse.y - camera.position.y) * 1.5;\n\n      if (camera.position.z - camera.userData.targetZ > 5) {\n        camera.position.z -= 10 * 1.5;\n      }\n\n      camera.lookAt(scene.position);\n\n      if (begin) {\n        raycaster.setFromCamera(mouse, camera);\n        var intersects = raycaster.intersectObjects(groupThumb.children); //console.log(groupThumb.children);\n\n        if (intersects.length > 0) {\n          if (INTERSECTED !== intersects[0].object) {\n            if (INTERSECTED) {\n              INTERSECTED.material.emissive.setHex(INTERSECTED.currentHex);\n              INTERSECTED.material.emissiveIntensity = 0.5;\n            }\n\n            INTERSECTED = intersects[0].object; //console.log('new intersect ');\n\n            INTERSECTED.currentHex = INTERSECTED.material.emissive.getHex();\n            INTERSECTED.material.emissive.setHex(0x08fbff);\n            INTERSECTED.material.emissiveIntensity = 0.5;\n          }\n        } else {\n          if (INTERSECTED) {\n            INTERSECTED.material.emissive.setHex(INTERSECTED.currentHex);\n            INTERSECTED.material.emissiveIntensity = 0.5;\n          }\n\n          INTERSECTED = null;\n\n          if (text !== undefined) {\n            groupFont.remove(text);\n            text.geometry.dispose();\n          }\n\n          text = new Mesh(titleGeometry, matLite);\n          text.position.z = -800;\n          text.position.y = 300;\n          groupFont.add(text);\n        }\n      }\n\n      if (INTERSECTED) {\n        if (text !== undefined) {\n          groupFont.remove(text);\n          text.geometry.dispose();\n        }\n\n        text = new Mesh(nameGeo[INTERSECTED.userData.id], matLite);\n        text.position.z = -800;\n        text.position.y = 300;\n        groupFont.add(text);\n      }\n\n      renderer.render(scene, camera);\n    }\n\n    function init() {\n      scene.background = new Color(0x000000);\n      scene.fog = new Fog(0x050505, 2000, 3500);\n      scene.add(new AmbientLight(0x444444));\n      directionalLight.position.set(0, -1, 0);\n      scene.add(directionalLight);\n      var loader = new FontLoader();\n      loader.load('assets/fonts/Press_Start_2P/PressStart.json', function (font) {\n        titleShapes = font.generateShapes(titleText, 100);\n        enterShapes = font.generateShapes(enterMessage, 10);\n        titleGeometry = new ShapeGeometry(titleShapes);\n        enterGeo = new ShapeGeometry(enterShapes);\n        titleGeometry.computeBoundingBox();\n        enterGeo.computeBoundingBox();\n        var xMid = -0.5 * (titleGeometry.boundingBox.max.x - titleGeometry.boundingBox.min.x);\n        titleGeometry.translate(xMid, 0, 0);\n\n        for (var i = 0; i < idText.length; i++) {\n          nameGeo.push(new ShapeGeometry(font.generateShapes(idText[i], 85)));\n          nameGeo[i].computeBoundingBox();\n          nameGeo[i].translate(-0.5 * nameGeo[i].boundingBox.max.x - nameGeo[i].boundingBox.min.x, 0.3 * (nameGeo[i].boundingBox.max.y - nameGeo[i].boundingBox.min.y), 0);\n        }\n\n        text = new Mesh(geometry, matLite);\n        text.position.z = -800;\n        text.position.y = 300;\n        groupFont.add(text);\n        var enterText = new Mesh(enterGeo, matLite);\n        enterText.position.z = inputEl.current.offsetWidth / 2;\n        enterText.position.y = -300;\n        groupFont.add(enterText);\n        var holeShapes = [];\n\n        for (var _i = 0; _i < titleShapes.length; _i++) {\n          var shape = titleShapes[_i];\n\n          if (shape.holes && shape.holes.length > 0) {\n            for (var j = 0; j < shape.holes.length; j++) {\n              var hole = shape.holes[j];\n              holeShapes.push(hole);\n            }\n          }\n        }\n\n        titleShapes.push.apply(titleShapes, holeShapes);\n        var lineText = new Object3D();\n\n        for (var _i2 = 0; _i2 < titleShapes.length; _i2++) {\n          var _shape = titleShapes[_i2];\n\n          var points = _shape.getPoints();\n\n          var lineGeo = new BufferGeometry().setFromPoints(points);\n          lineGeo.translate(xMid, 0, 0);\n          var lineMesh = new Line(lineGeo, matDark);\n          lineText.add(lineMesh);\n        }\n\n        lineText.position.z = 500;\n        groupFont.add(lineText);\n      });\n      scene.add(groupFont);\n      var xLen = 20;\n      var offset = 5;\n      var geometry = new BoxGeometry(xLen, xLen, 1);\n\n      for (var i = 0; i < 3; i++) {\n        var texture = new TextureLoader().load('assets/images/thumbnails/artwork' + (i + 1) + '.png');\n        var mesh = new Mesh(geometry, new MeshLambertMaterial({\n          map: texture\n        }));\n        mesh.userData.url = '/gallery/artwork' + (i + 1) + '/';\n        mesh.userData.isSelected = false;\n        mesh.userData.id = i;\n        mesh.position.x = (-xLen - offset) * (i - 1);\n        mesh.position.z = 10;\n        groupThumb.add(mesh);\n      }\n\n      scene.add(groupThumb);\n      geometry = new PlaneGeometry(500, 500, 10, 10);\n      var geo = new WireframeGeometry(geometry);\n      matLineBasic = new LineBasicMaterial({\n        color: 0x9c08ff\n      });\n      wireframe = new LineSegments(geo, matLineBasic);\n      wireframe.computeLineDistances();\n      wireframe.visible = true;\n      wireframe.rotateX(Math.PI / 2);\n      wireframe.position.y -= xLen + offset;\n      scene.add(wireframe);\n      var renderScene = new RenderPass(scene, camera);\n      var bloomPass = new UnrealBloomPass(new Vector2(window.innerWidth, window.innerHeight), 2.6, 0.4, 0.01);\n      composer = new EffectComposer(renderer);\n      composer.addPass(renderScene);\n      composer.addPass(bloomPass);\n      composer.addPass(glitchPass);\n      camera.position.set(0, 75, 1300);\n      camera.userData.targetZ = 1300;\n      camera.lookAt(new Vector3(0, 0, 0));\n    }\n\n    init();\n    animate();\n  }, []);\n  return __jsx(React.Fragment, null, __jsx(\"div\", {\n    ref: inputEl\n  }));\n}\n\nexport default Art;"],"sourceRoot":""}