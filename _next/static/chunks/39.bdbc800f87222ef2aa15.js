(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[39],{"4ABH":function(t,e,n){"use strict";function i(t,e){if(null!==t&&void 0!==t){if(e&&e.remove(t),t.dispose&&t.dispose(),t.geometry&&t.geometry.dispose(),t.material&&t.material.dispose(),t.children)for(var n=0,o=t.children.length;n<o;)i(t.children[0],t),n++;"Scene"===t.type&&t.dispose(),t=null,console.log("test")}}n.r(e),n.d(e,"default",(function(){return i}))},kEfZ:function(t,e,n){"use strict";n.r(e);var i=n("q1tI"),o=n.n(i),r=n("Womt"),a=n("k+my"),s=n("Mtn/"),d=n("mrLe"),u=n("G1Ma"),l={uniforms:{tDiffuse:{value:null},tDisp:{value:null},byp:{value:0},amount:{value:.08},angle:{value:.02},seed:{value:.02},seed_x:{value:.02},seed_y:{value:.02},distortion_x:{value:.5},distortion_y:{value:.6},col_s:{value:.05}},vertexShader:"\n\n\t\tvarying vec2 vUv;\n\t\tvoid main() {\n\t\t\tvUv = uv;\n\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\t\t}",fragmentShader:"\n\n\t\tuniform int byp; //should we apply the glitch ?\n\n\t\tuniform sampler2D tDiffuse;\n\t\tuniform sampler2D tDisp;\n\n\t\tuniform float amount;\n\t\tuniform float angle;\n\t\tuniform float seed;\n\t\tuniform float seed_x;\n\t\tuniform float seed_y;\n\t\tuniform float distortion_x;\n\t\tuniform float distortion_y;\n\t\tuniform float col_s;\n\n\t\tvarying vec2 vUv;\n\n\n\t\tfloat rand(vec2 co){\n\t\t\treturn fract(sin(dot(co.xy ,vec2(12.9898,78.233))) * 43758.5453);\n\t\t}\n\n\t\tvoid main() {\n\t\t\tif(byp<1) {\n\t\t\t\tvec2 p = vUv;\n\t\t\t\tfloat xs = floor(gl_FragCoord.x / 0.5);\n\t\t\t\tfloat ys = floor(gl_FragCoord.y / 0.5);\n\t\t\t\t//based on staffantans glitch shader for unity https://github.com/staffantan/unityglitch\n\t\t\t\tvec4 normal = texture2D (tDisp, p*seed*seed);\n\t\t\t\tif(p.y<distortion_x+col_s && p.y>distortion_x-col_s*seed) {\n\t\t\t\t\tif(seed_x>0.){\n\t\t\t\t\t\tp.y = 1. - (p.y + distortion_y);\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tp.y = distortion_y;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif(p.x<distortion_y+col_s && p.x>distortion_y-col_s*seed) {\n\t\t\t\t\tif(seed_y>0.){\n\t\t\t\t\t\tp.x=distortion_x;\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tp.x = 1. - (p.x + distortion_x);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tp.x+=normal.x*seed_x*(seed/5.);\n\t\t\t\tp.y+=normal.y*seed_y*(seed/5.);\n\t\t\t\t//base from RGB shift shader\n\t\t\t\tvec2 offset = amount * vec2( cos(angle), sin(angle));\n\t\t\t\tvec4 cr = texture2D(tDiffuse, p + offset);\n\t\t\t\tvec4 cga = texture2D(tDiffuse, p);\n\t\t\t\tvec4 cb = texture2D(tDiffuse, p - offset);\n\t\t\t\tgl_FragColor = vec4(cr.r, cga.g, cb.b, cga.a);\n\t\t\t\t//add noise\n\t\t\t\tvec4 snow = 200.*amount*vec4(rand(vec2(xs * seed,ys * seed*50.))*0.2);\n\t\t\t\tgl_FragColor = gl_FragColor+ snow;\n\t\t\t}\n\t\t\telse {\n\t\t\t\tgl_FragColor=texture2D (tDiffuse, vUv);\n\t\t\t}\n\t\t}"},c=function(t){u.b.call(this),void 0===l&&console.error("GlitchPass relies on DigitalGlitch");var e=l;this.uniforms=r.Zb.clone(e.uniforms),void 0===t&&(t=64),this.uniforms.tDisp.value=this.generateHeightmap(t),this.material=new r.Fb({uniforms:this.uniforms,vertexShader:e.vertexShader,fragmentShader:e.fragmentShader}),this.fsQuad=new u.a(this.material),this.curF=0};c.prototype=Object.assign(Object.create(u.b.prototype),{constructor:c,render:function(t,e,n){this.uniforms.tDiffuse.value=n.texture,this.uniforms.seed.value=Math.random(),this.uniforms.byp.value=0,this.curF%this.randX===0?(this.uniforms.amount.value=Math.random()/30,this.uniforms.angle.value=r.X.randFloat(-Math.PI,Math.PI),this.uniforms.seed_x.value=r.X.randFloat(-1,1),this.uniforms.seed_y.value=r.X.randFloat(-1,1),this.uniforms.distortion_x.value=r.X.randFloat(0,1),this.uniforms.distortion_y.value=r.X.randFloat(0,1),this.curF=0,this.generateTrigger()):this.curF%this.randX<this.randX/5?(this.isActive=!0,this.uniforms.amount.value=Math.random()/90,this.uniforms.angle.value=r.X.randFloat(-Math.PI,Math.PI),this.uniforms.distortion_x.value=r.X.randFloat(0,1),this.uniforms.distortion_y.value=r.X.randFloat(0,1),this.uniforms.seed_x.value=r.X.randFloat(-.3,.3),this.uniforms.seed_y.value=r.X.randFloat(-.3,.3),this.curF++):this.uniforms.byp.value=1,this.renderToScreen?(t.setRenderTarget(null),this.fsQuad.render(t)):(t.setRenderTarget(e),this.clear&&t.clear(),this.fsQuad.render(t))},generateTrigger:function(){this.randX=r.X.randInt(120,240)},generateHeightmap:function(t){for(var e=new Float32Array(t*t*3),n=t*t,i=0;i<n;i++){var o=r.X.randFloat(0,1);e[3*i+0]=o,e[3*i+1]=o,e[3*i+2]=o}return new r.r(e,t,t,r.Ab,r.A)},activate:function(){this.curF=1,this.generateTrigger()}});var f=n("4ABH"),m=o.a.createElement;e.default=function(){var t=Object(i.useRef)(null);return Object(i.useEffect)((function(){return function(){n("4ABH"),Object(f.default)(t.renderer,t)}}),[]),Object(i.useEffect)((function(){var e=new r.Eb,n=new r.rb(75,t.current.offsetWidth/t.current.offsetHeight,.1,1e3),i=new r.fc({antialias:!0});i.setPixelRatio(t.current.offsetWidth/t.current.offsetHeight),i.setSize(t.current.offsetWidth,t.current.offsetHeight),t.current.append(i.domElement),i.toneMapping=r.Cb,t.current.addEventListener("mousemove",(function(e){F.x=e.clientX/t.current.offsetWidth*2-1,F.y=-e.clientY/t.current.offsetHeight*2+1})),t.current.addEventListener("resize",(function(){n.aspect=window.innerWidth/window.innerHeight,i.setSize(window.innerWidth,window.innerHeight),f.setSize(window.innerWidth,window.innerHeight),n.updateProjectionMatrix()})),t.current.addEventListener("click",(function(t){D.activate(),console.log(B),o&&H&&!P&&(m=o.userData.url,P=!0);o||(m=null);H||(n.userData.targetZ=80,H=!0)}));var o,u,l,f,m,h,v,g,p,w,x=new r.Bb,y=new r.t(16711935,.5),b=new r.F,_=new r.F,F=new r.ac,D=new c,H=!1,S=new r.o,B=.55,P=!1,X=new r.N({color:26265,side:r.u}),M=new r.bb({color:588799,transparent:!0,opacity:.4,side:r.u}),j=["A Thousand\nSplendid Suns\n//amna","MRN\n//mariana","Kissing Circles\n//mia"],k=[];!function(){e.background=new r.p(0),e.fog=new r.B(328965,2e3,3500),e.add(new r.c(4473924)),y.position.set(0,-1,0),e.add(y),(new r.C).load("assets/fonts/Press_Start_2P/PressStart.json",(function(e){h=e.generateShapes("WE3 \nGallery",100),v=e.generateShapes("click anywhere to enter",10),g=new r.Hb(h),w=new r.Hb(v),g.computeBoundingBox(),w.computeBoundingBox();var n=-.5*(g.boundingBox.max.x-g.boundingBox.min.x);g.translate(n,0,0);for(var i=0;i<j.length;i++)k.push(new r.Hb(e.generateShapes(j[i],85))),k[i].computeBoundingBox(),k[i].translate(-.5*k[i].boundingBox.max.x-k[i].boundingBox.min.x,.3*(k[i].boundingBox.max.y-k[i].boundingBox.min.y),0);(p=new r.ab(o,M)).position.z=-800,p.position.y=300,_.add(p);var a=new r.ab(w,M);a.position.z=t.current.offsetWidth/2,a.position.y=-300,_.add(a);for(var s=[],d=0;d<h.length;d++){var u=h[d];if(u.holes&&u.holes.length>0)for(var l=0;l<u.holes.length;l++){var c=u.holes[l];s.push(c)}}h.push.apply(h,s);for(var f=new r.nb,m=0;m<h.length;m++){var x=h[m].getPoints(),y=(new r.k).setFromPoints(x);y.translate(n,0,0);var b=new r.M(y,X);f.add(b)}f.position.z=500,_.add(f)})),e.add(_);for(var o=new r.i(20,20,1),c=0;c<3;c++){var m=(new r.Tb).load("assets/images/thumbnails/artwork"+(c+1)+".png"),x=new r.ab(o,new r.cb({map:m}));x.userData.url="/gallery/artwork"+(c+1)+"/",x.userData.isSelected=!1,x.userData.id=c,x.position.x=-25*(c-1),x.position.z=10,b.add(x)}e.add(b),o=new r.sb(500,500,10,10);var F=new r.gc(o);l=new r.N({color:10225919}),(u=new r.P(F,l)).computeLineDistances(),u.visible=!0,u.rotateX(Math.PI/2),u.position.y-=25,e.add(u);var H=new a.a(e,n),S=new d.a(new r.ac(window.innerWidth,window.innerHeight),2.6,.4,.01);(f=new s.a(i)).addPass(H),f.addPass(S),f.addPass(D),n.position.set(0,75,1300),n.userData.targetZ=1300,n.lookAt(new r.bc(0,0,0))}(),function t(){P&&(B-=S.getDelta()),B<=0?(window.location.href=m,cancelAnimationFrame(this)):(requestAnimationFrame(t),function(){n.position.x+=.5*(F.x-n.position.x),n.position.y+=1.5*(-F.y-n.position.y),n.position.z-n.userData.targetZ>5&&(n.position.z-=15);if(n.lookAt(e.position),H){x.setFromCamera(F,n);var t=x.intersectObjects(b.children);t.length>0?o!==t[0].object&&(o&&(o.material.emissive.setHex(o.currentHex),o.material.emissiveIntensity=.5),(o=t[0].object).currentHex=o.material.emissive.getHex(),o.material.emissive.setHex(588799),o.material.emissiveIntensity=.5):(o&&(o.material.emissive.setHex(o.currentHex),o.material.emissiveIntensity=.5),o=null,void 0!==p&&(_.remove(p),p.geometry.dispose()),(p=new r.ab(g,M)).position.z=-800,p.position.y=300,_.add(p))}o&&(void 0!==p&&(_.remove(p),p.geometry.dispose()),(p=new r.ab(k[o.userData.id],M)).position.z=-800,p.position.y=300,_.add(p));i.render(e,n)}(),f.render())}()}),[]),m(o.a.Fragment,null,m("div",{ref:t}))}}}]);