_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[16,38],{"4ABH":function(t,e,n){"use strict";function i(t,e){if(null!==t&&void 0!==t){if(e&&e.remove(t),t.dispose&&t.dispose(),t.geometry&&t.geometry.dispose(),t.material&&t.material.dispose(),t.children)for(var n=0,o=t.children.length;n<o;)i(t.children[0],t),n++;"Scene"===t.type&&t.dispose(),t=null,console.log("test")}}n.r(e),n.d(e,"default",(function(){return i}))},"HaE+":function(t,e,n){"use strict";function i(t,e,n,i,o,r,a){try{var s=t[r](a),u=s.value}catch(d){return void n(d)}s.done?e(u):Promise.resolve(u).then(i,o)}function o(t){return function(){var e=this,n=arguments;return new Promise((function(o,r){var a=t.apply(e,n);function s(t){i(a,o,r,s,u,"next",t)}function u(t){i(a,o,r,s,u,"throw",t)}s(void 0)}))}}n.d(e,"a",(function(){return o}))},Qetd:function(t,e,n){"use strict";var i=Object.assign.bind(Object);t.exports=i,t.exports.default=t.exports},kEfZ:function(t,e,n){"use strict";n.r(e);var i=n("q1tI"),o=n.n(i),r=n("Womt"),a=n("k+my"),s=n("Mtn/"),u=n("mrLe"),d=n("G1Ma"),l={uniforms:{tDiffuse:{value:null},tDisp:{value:null},byp:{value:0},amount:{value:.08},angle:{value:.02},seed:{value:.02},seed_x:{value:.02},seed_y:{value:.02},distortion_x:{value:.5},distortion_y:{value:.6},col_s:{value:.05}},vertexShader:"\n\n\t\tvarying vec2 vUv;\n\t\tvoid main() {\n\t\t\tvUv = uv;\n\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\t\t}",fragmentShader:"\n\n\t\tuniform int byp; //should we apply the glitch ?\n\n\t\tuniform sampler2D tDiffuse;\n\t\tuniform sampler2D tDisp;\n\n\t\tuniform float amount;\n\t\tuniform float angle;\n\t\tuniform float seed;\n\t\tuniform float seed_x;\n\t\tuniform float seed_y;\n\t\tuniform float distortion_x;\n\t\tuniform float distortion_y;\n\t\tuniform float col_s;\n\n\t\tvarying vec2 vUv;\n\n\n\t\tfloat rand(vec2 co){\n\t\t\treturn fract(sin(dot(co.xy ,vec2(12.9898,78.233))) * 43758.5453);\n\t\t}\n\n\t\tvoid main() {\n\t\t\tif(byp<1) {\n\t\t\t\tvec2 p = vUv;\n\t\t\t\tfloat xs = floor(gl_FragCoord.x / 0.5);\n\t\t\t\tfloat ys = floor(gl_FragCoord.y / 0.5);\n\t\t\t\t//based on staffantans glitch shader for unity https://github.com/staffantan/unityglitch\n\t\t\t\tvec4 normal = texture2D (tDisp, p*seed*seed);\n\t\t\t\tif(p.y<distortion_x+col_s && p.y>distortion_x-col_s*seed) {\n\t\t\t\t\tif(seed_x>0.){\n\t\t\t\t\t\tp.y = 1. - (p.y + distortion_y);\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tp.y = distortion_y;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif(p.x<distortion_y+col_s && p.x>distortion_y-col_s*seed) {\n\t\t\t\t\tif(seed_y>0.){\n\t\t\t\t\t\tp.x=distortion_x;\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tp.x = 1. - (p.x + distortion_x);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tp.x+=normal.x*seed_x*(seed/5.);\n\t\t\t\tp.y+=normal.y*seed_y*(seed/5.);\n\t\t\t\t//base from RGB shift shader\n\t\t\t\tvec2 offset = amount * vec2( cos(angle), sin(angle));\n\t\t\t\tvec4 cr = texture2D(tDiffuse, p + offset);\n\t\t\t\tvec4 cga = texture2D(tDiffuse, p);\n\t\t\t\tvec4 cb = texture2D(tDiffuse, p - offset);\n\t\t\t\tgl_FragColor = vec4(cr.r, cga.g, cb.b, cga.a);\n\t\t\t\t//add noise\n\t\t\t\tvec4 snow = 200.*amount*vec4(rand(vec2(xs * seed,ys * seed*50.))*0.2);\n\t\t\t\tgl_FragColor = gl_FragColor+ snow;\n\t\t\t}\n\t\t\telse {\n\t\t\t\tgl_FragColor=texture2D (tDiffuse, vUv);\n\t\t\t}\n\t\t}"},c=function(t){d.b.call(this),void 0===l&&console.error("GlitchPass relies on DigitalGlitch");var e=l;this.uniforms=r.Zb.clone(e.uniforms),void 0===t&&(t=64),this.uniforms.tDisp.value=this.generateHeightmap(t),this.material=new r.Fb({uniforms:this.uniforms,vertexShader:e.vertexShader,fragmentShader:e.fragmentShader}),this.fsQuad=new d.a(this.material),this.curF=0};c.prototype=Object.assign(Object.create(d.b.prototype),{constructor:c,render:function(t,e,n){this.uniforms.tDiffuse.value=n.texture,this.uniforms.seed.value=Math.random(),this.uniforms.byp.value=0,this.curF%this.randX===0?(this.uniforms.amount.value=Math.random()/30,this.uniforms.angle.value=r.X.randFloat(-Math.PI,Math.PI),this.uniforms.seed_x.value=r.X.randFloat(-1,1),this.uniforms.seed_y.value=r.X.randFloat(-1,1),this.uniforms.distortion_x.value=r.X.randFloat(0,1),this.uniforms.distortion_y.value=r.X.randFloat(0,1),this.curF=0,this.generateTrigger()):this.curF%this.randX<this.randX/5?(this.isActive=!0,this.uniforms.amount.value=Math.random()/90,this.uniforms.angle.value=r.X.randFloat(-Math.PI,Math.PI),this.uniforms.distortion_x.value=r.X.randFloat(0,1),this.uniforms.distortion_y.value=r.X.randFloat(0,1),this.uniforms.seed_x.value=r.X.randFloat(-.3,.3),this.uniforms.seed_y.value=r.X.randFloat(-.3,.3),this.curF++):this.uniforms.byp.value=1,this.renderToScreen?(t.setRenderTarget(null),this.fsQuad.render(t)):(t.setRenderTarget(e),this.clear&&t.clear(),this.fsQuad.render(t))},generateTrigger:function(){this.randX=r.X.randInt(120,240)},generateHeightmap:function(t){for(var e=new Float32Array(t*t*3),n=t*t,i=0;i<n;i++){var o=r.X.randFloat(0,1);e[3*i+0]=o,e[3*i+1]=o,e[3*i+2]=o}return new r.r(e,t,t,r.Ab,r.A)},activate:function(){this.curF=1,this.generateTrigger()}});var f=n("4ABH"),h=o.a.createElement;e.default=function(){var t=Object(i.useRef)(null);return Object(i.useEffect)((function(){return function(){n("4ABH"),Object(f.default)(t.renderer,t)}}),[]),Object(i.useEffect)((function(){var e=new r.Eb,n=new r.rb(75,t.current.offsetWidth/t.current.offsetHeight,.1,1e3),i=new r.fc({antialias:!0});i.setPixelRatio(t.current.offsetWidth/t.current.offsetHeight),i.setSize(t.current.offsetWidth,t.current.offsetHeight),t.current.append(i.domElement),i.toneMapping=r.Cb,t.current.addEventListener("mousemove",(function(e){F.x=e.clientX/t.current.offsetWidth*2-1,F.y=-e.clientY/t.current.offsetHeight*2+1})),t.current.addEventListener("resize",(function(){n.aspect=window.innerWidth/window.innerHeight,i.setSize(window.innerWidth,window.innerHeight),f.setSize(window.innerWidth,window.innerHeight),n.updateProjectionMatrix()})),t.current.addEventListener("click",(function(t){D.activate(),console.log(X),o&&H&&!S&&(h=o.userData.url,S=!0);o||(h=null);H||(n.userData.targetZ=80,H=!0)}));var o,d,l,f,h,v,m,p,g,w,x=new r.Bb,y=new r.t(16711935,.5),b=new r.F,_=new r.F,F=new r.ac,D=new c,H=!1,P=new r.o,X=.55,S=!1,B=new r.N({color:26265,side:r.u}),E=new r.bb({color:588799,transparent:!0,opacity:.4,side:r.u}),M=["A Thousand\nSplendid Suns\n//amna","MRN\n//mariana","Kissing Circles\n//mia"],j=[];!function(){e.background=new r.p(0),e.fog=new r.B(328965,2e3,3500),e.add(new r.c(4473924)),y.position.set(0,-1,0),e.add(y),(new r.C).load("assets/fonts/Press_Start_2P/PressStart.json",(function(e){v=e.generateShapes("WE3 \nGallery",100),m=e.generateShapes("click anywhere to enter",10),p=new r.Hb(v),w=new r.Hb(m),p.computeBoundingBox(),w.computeBoundingBox();var n=-.5*(p.boundingBox.max.x-p.boundingBox.min.x);p.translate(n,0,0);for(var i=0;i<M.length;i++)j.push(new r.Hb(e.generateShapes(M[i],85))),j[i].computeBoundingBox(),j[i].translate(-.5*j[i].boundingBox.max.x-j[i].boundingBox.min.x,.3*(j[i].boundingBox.max.y-j[i].boundingBox.min.y),0);(g=new r.ab(o,E)).position.z=-800,g.position.y=300,_.add(g);var a=new r.ab(w,E);a.position.z=t.current.offsetWidth/2,a.position.y=-300,_.add(a);for(var s=[],u=0;u<v.length;u++){var d=v[u];if(d.holes&&d.holes.length>0)for(var l=0;l<d.holes.length;l++){var c=d.holes[l];s.push(c)}}v.push.apply(v,s);for(var f=new r.nb,h=0;h<v.length;h++){var x=v[h].getPoints(),y=(new r.k).setFromPoints(x);y.translate(n,0,0);var b=new r.M(y,B);f.add(b)}f.position.z=500,_.add(f)})),e.add(_);for(var o=new r.i(20,20,1),c=0;c<3;c++){var h=(new r.Tb).load("assets/images/thumbnails/artwork"+(c+1)+".png"),x=new r.ab(o,new r.cb({map:h}));x.userData.url="/gallery/artwork"+(c+1)+"/",x.userData.isSelected=!1,x.userData.id=c,x.position.x=-25*(c-1),x.position.z=10,b.add(x)}e.add(b),o=new r.sb(500,500,10,10);var F=new r.gc(o);l=new r.N({color:10225919}),(d=new r.P(F,l)).computeLineDistances(),d.visible=!0,d.rotateX(Math.PI/2),d.position.y-=25,e.add(d);var H=new a.a(e,n),P=new u.a(new r.ac(window.innerWidth,window.innerHeight),2.6,.4,.01);(f=new s.a(i)).addPass(H),f.addPass(P),f.addPass(D),n.position.set(0,75,1300),n.userData.targetZ=1300,n.lookAt(new r.bc(0,0,0))}(),function t(){S&&(X-=P.getDelta()),X<=0?(window.location.href=h,cancelAnimationFrame(this)):(requestAnimationFrame(t),function(){n.position.x+=.5*(F.x-n.position.x),n.position.y+=1.5*(-F.y-n.position.y),n.position.z-n.userData.targetZ>5&&(n.position.z-=15);if(n.lookAt(e.position),H){x.setFromCamera(F,n);var t=x.intersectObjects(b.children);t.length>0?o!==t[0].object&&(o&&(o.material.emissive.setHex(o.currentHex),o.material.emissiveIntensity=.5),(o=t[0].object).currentHex=o.material.emissive.getHex(),o.material.emissive.setHex(588799),o.material.emissiveIntensity=.5):(o&&(o.material.emissive.setHex(o.currentHex),o.material.emissiveIntensity=.5),o=null,void 0!==g&&(_.remove(g),g.geometry.dispose()),(g=new r.ab(p,E)).position.z=-800,g.position.y=300,_.add(g))}o&&(void 0!==g&&(_.remove(g),g.geometry.dispose()),(g=new r.ab(j[o.userData.id],E)).position.z=-800,g.position.y=300,_.add(g));i.render(e,n)}(),f.render())}()}),[]),h(o.a.Fragment,null,h("div",{ref:t}))}},wGXo:function(t,e,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/ThreeCanvas",function(){return n("kEfZ")}])}},[["wGXo",0,2,3,1,6]]]);