"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[132],{1132:function(e,t,n){n.r(t),n.d(t,{default:function(){return Fe}});var s=n(5893),i=n(7294),r=n(2212);function a(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function o(e,t){return null!=t&&"undefined"!==typeof Symbol&&t[Symbol.hasInstance]?t[Symbol.hasInstance](e):e instanceof t}var c=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.callbacks={},this.callbacks.base={}}var t,n,s;return t=e,(n=[{key:"on",value:function(e,t){var n=this;return"undefined"===typeof e||""===e?(console.warn("wrong names"),!1):"undefined"===typeof t?(console.warn("wrong callback"),!1):(this.resolveNames(e).forEach((function(e){var s=n.resolveName(e);o(n.callbacks[s.namespace],Object)||(n.callbacks[s.namespace]={}),o(n.callbacks[s.namespace][s.value],Array)||(n.callbacks[s.namespace][s.value]=[]),n.callbacks[s.namespace][s.value].push(t)})),this)}},{key:"off",value:function(e){var t=this;return"undefined"===typeof e||""===e?(console.warn("wrong name"),!1):(this.resolveNames(e).forEach((function(e){var n=t.resolveName(e);if("base"!==n.namespace&&""===n.value)delete t.callbacks[n.namespace];else if("base"===n.namespace)for(var s in t.callbacks)o(t.callbacks[s],Object)&&o(t.callbacks[s][n.value],Array)&&(delete t.callbacks[s][n.value],0===Object.keys(t.callbacks[s]).length&&delete t.callbacks[s]);else o(t.callbacks[n.namespace],Object)&&o(t.callbacks[n.namespace][n.value],Array)&&(delete t.callbacks[n.namespace][n.value],0===Object.keys(t.callbacks[n.namespace]).length&&delete t.callbacks[n.namespace])})),this)}},{key:"trigger",value:function(e,t){if("undefined"===typeof e||""===e)return console.warn("wrong name"),!1;var n=null,s=null,i=o(t,Array)?t:[],r=this.resolveNames(e);if("base"===(r=this.resolveName(r[0])).namespace)for(var a in this.callbacks)o(this.callbacks[a],Object)&&o(this.callbacks[a][r.value],Array)&&this.callbacks[a][r.value].forEach((function(e){s=e.apply(this,i),"undefined"===typeof n&&(n=s)}));else if(o(this.callbacks[r.namespace],Object)){if(""===r.value)return console.warn("wrong name"),this;this.callbacks[r.namespace][r.value].forEach((function(e){s=e.apply(this,i),"undefined"===typeof n&&(n=s)}))}return n}},{key:"resolveNames",value:function(e){var t=e;return t=(t=(t=t.replace(/[^a-zA-Z0-9 ,/.]/g,"")).replace(/[,/]+/g," ")).split(" ")}},{key:"resolveName",value:function(e){var t={},n=e.split(".");return t.original=e,t.value=n[0],t.namespace="base",n.length>1&&""!==n[1]&&(t.namespace=n[1]),t}}])&&a(t.prototype,n),s&&a(t,s),e}();function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e,t){return!t||"object"!==f(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var f=function(e){return e&&"undefined"!==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function d(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,s=l(e);if(t){var i=l(this).constructor;n=Reflect.construct(s,arguments,i)}else n=s.apply(this,arguments);return u(this,n)}}var p=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}(n,e);var t=d(n);function n(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),(e=t.call(this)).width=window.innerWidth,e.height=window.innerHeight,e.pixelRatio=Math.min(window.devicePixelRatio,2),window.addEventListener("resize",(function(){e.width=window.innerWidth,e.height=window.innerHeight,e.pixelRatio=Math.min(window.devicePixelRatio,2),e.trigger("resize")})),e}return n}(c);function m(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function v(e){return(v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function y(e,t){return!t||"object"!==g(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function b(e,t){return(b=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var g=function(e){return e&&"undefined"!==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function w(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,s=v(e);if(t){var i=v(this).constructor;n=Reflect.construct(s,arguments,i)}else n=s.apply(this,arguments);return y(this,n)}}var x=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&b(e,t)}(r,e);var t,n,s,i=w(r);function r(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),(e=i.call(this)).start=Date.now(),e.current=e.start,e.elapsed=0,e.delta=16,window.requestAnimationFrame((function(){e.tick()})),e}return t=r,(n=[{key:"tick",value:function(){var e=this,t=Date.now();this.delta=t-this.current,this.current=t,this.elapsed=this.current-this.start,this.trigger("tick"),window.requestAnimationFrame((function(){e.tick()}))}}])&&m(t.prototype,n),s&&m(t,s),r}(c),k=n(9365),M=n(6167);function j(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}var E=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.experience=new He,this.sizes=this.experience.sizes,this.scene=this.experience.scene,this.canvas=this.experience.canvas,this.setInstance(),this.setOrbitControls(),this.setEventListeners()}var t,n,s;return t=e,(n=[{key:"setInstance",value:function(){this.instance=new r.cPb(35,this.sizes.width/this.sizes.height,.1,1e4),this.instance.position.set(10,2,16),this.scene.add(this.instance)}},{key:"setOrbitControls",value:function(){this.controls=new k.z(this.instance,this.canvas),this.controls.target=new r.Pa4(0,5,0),this.controls.enableDamping=!0,this.controls.enablePan=!1,this.controls.screenSpacePanning=!1,this.controls.maxPolarAngle=Math.PI/1.8,this.controls.minDistance=10,this.controls.maxDistance=22,this.controls.autoRotate=!0,this.controls.autoRotateSpeed=2}},{key:"resize",value:function(){this.instance.aspect=this.sizes.width/this.sizes.height,this.instance.updateProjectionMatrix()}},{key:"setEventListeners",value:function(){var e=this;this.rotateToggleButton=document.getElementById("rotate-toggle"),this.rotateToggleButton.addEventListener("click",(function(){e.controls.autoRotate=!e.controls.autoRotate,e.rotateToggleButton.style.background=e.controls.autoRotate?M.colors.activeButton:M.colors.inactiveButton,e.rotateToggleButton.style.color=e.controls.autoRotate?M.colors.activeText:M.colors.inactiveText,e.rotateToggleButton.innerHTML=e.controls.autoRotate?M.buttons.autoRotateOn:M.buttons.autoRotateOff}))}},{key:"update",value:function(){this.controls.update()}}])&&j(t.prototype,n),s&&j(t,s),e}(),O=n(8606),P=n(6591),B=n(4458),L=n(7531);function T(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}var S=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.experience=new He,this.canvas=this.experience.canvas,this.sizes=this.experience.sizes,this.scene=this.experience.scene,this.camera=this.experience.camera,this.setInstance(),this.setPostProcessing()}var t,n,s;return t=e,(n=[{key:"setInstance",value:function(){this.instance=new r.CP7({canvas:this.canvas,antialias:!0}),this.instance.physicallyCorrectLights=!0,this.instance.outputEncoding=r.knz,this.instance.toneMapping=r.YGz,this.instance.toneMappingExposure=1.75,this.instance.shadowMap.enabled=!0,this.instance.shadowMap.type=r.ntZ,this.instance.setSize(this.sizes.width,this.sizes.height),this.instance.setPixelRatio(Math.min(this.sizes.pixelRatio,2))}},{key:"setPostProcessing",value:function(){var e=.7,t=1,n=3;this.renderScene=new B.C(this.scene,this.camera.instance),this.bloomPass=new P.m(new r.FM8(this.sizes.width,this.sizes.height),1.5,.4,.85),this.bloomPass.threshold=t,this.bloomPass.strength=e,this.bloomPass.radius=n,this.bloomComposer=new O.xC(this.instance),this.bloomComposer.renderToScreen=!1,this.bloomComposer.addPass(this.renderScene),this.bloomComposer.addPass(this.bloomPass),this.finalPass=new L.T(new r.jyz({uniforms:{baseTexture:{value:null},bloomTexture:{value:this.bloomComposer.renderTarget2.texture}},vertexShader:"\nvarying vec2 vUv;\n\n\t\t\tvoid main() {\n\n\t\t\t\tvUv = uv;\n\n\t\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n\t\t\t}\n",fragmentShader:"\nuniform sampler2D baseTexture;\n\t\t\tuniform sampler2D bloomTexture;\n\n\t\t\tvarying vec2 vUv;\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = ( texture2D( baseTexture, vUv ) + vec4( 1.0 ) * texture2D( bloomTexture, vUv ) );\n\n\t\t\t}\n",defines:{}}),"baseTexture"),this.finalPass.needsSwap=!0,this.finalComposer=new O.xC(this.instance),this.finalComposer.addPass(this.renderScene),this.finalComposer.addPass(this.finalPass)}},{key:"resize",value:function(){this.instance.setSize(this.sizes.width,this.sizes.height),this.bloomComposer.setSize(this.sizes.width,this.sizes.height),this.finalComposer.setSize(this.sizes.width,this.sizes.height),this.instance.setPixelRatio(Math.min(this.sizes.pixelRatio,2)),this.bloomComposer.setPixelRatio(Math.min(this.sizes.pixelRatio,2)),this.finalComposer.setPixelRatio(Math.min(this.sizes.pixelRatio,2))}},{key:"update",value:function(){this.bloomComposer.render(),this.finalComposer.render()}}])&&T(t.prototype,n),s&&T(t,s),e}(),C=n(4294);function R(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function z(e,t){return null!=t&&"undefined"!==typeof Symbol&&t[Symbol.hasInstance]?t[Symbol.hasInstance](e):e instanceof t}var _=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.experience=new He,this.scene=this.experience.scene,this.resources=this.experience.resources,this.debug=this.experience.debug,this.fogColor=M.colors.fogColor,this.scene.fog=new r.ybr(this.fogColor,10,40),this.setSpotLight(7,10,0),this.setStudioModel(),this.setEnvironmentMap()}var t,n,s;return t=e,(n=[{key:"setSpotLight",value:function(e,t,n){this.spotLight=new r.PMe(16772744);var s=new r.xo$(.15,16,8),i=new r.Wid({emissive:16777215,emissiveIntensity:1,color:0});this.spotLight.add(new r.Kj0(s,i)),this.spotLight.position.set(e,t,n),this.spotLight.distance=40,this.spotLight.decay=1.5,this.spotLight.angle=Math.PI/4,this.spotLight.penumbra=.5,this.spotLight.intensity=150,this.setLensflare(),this.scene.add(this.spotLight)}},{key:"setStudioModel",value:function(){this.studioModel=this.resources.items.studioLights.children.filter((function(e){return"spot_light"===e.name}))[0],this.studioModel.scale.set(.145,.145,.145),this.studioModel.position.set(8,7.4,0),this.studioModel.rotation.set(0,.5*-Math.PI,0),this.scene.add(this.studioModel)}},{key:"setLensflare",value:function(){var e=new C.Z;e.addElement(new C.B(this.resources.items.lensflare0,700,0,this.spotLight.color)),e.addElement(new C.B(this.resources.items.lensflare1,60,.6)),e.addElement(new C.B(this.resources.items.lensflare1,70,.7)),e.addElement(new C.B(this.resources.items.lensflare1,120,.9)),e.addElement(new C.B(this.resources.items.lensflare1,70,1)),this.spotLight.add(e)}},{key:"setEnvironmentMap",value:function(){var e=this;this.environmentMap={},this.environmentMap.intensity=.4,this.environmentMap.texture=this.resources.items.environmentMapTexture,this.scene.environment=this.environmentMap.texture,this.environmentMap.updateMaterials=function(){var t=e;e.scene.traverse((function(e){z(e,r.Kj0)&&z(e.material,r.Wid)&&(e.material.envMap=t.environmentMap.texture,e.material.envMapIntensity=t.environmentMap.intensity,e.material.needsUpdate=!0)}))},this.environmentMap.updateMaterials()}}])&&R(t.prototype,n),s&&R(t,s),e}(),A=n(6038);function I(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function H(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var F=function(){function e(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.experience=new He,this.scene=this.experience.scene,this.resources=this.experience.resources,this.setGeometry(),this.setTextures(),this.setMaterial(),this.setMesh(),this.resources.on("ready",(function(){A.p8.to(t.material.uniforms.uAlpha,{duration:3,value:0})}))}var t,n,s;return t=e,(n=[{key:"setGeometry",value:function(){this.geometry=new r._12(2,2,1,1)}},{key:"setTextures",value:function(){this.textures={uniforms:{uAlpha:{value:1}},vertexShader:"\nvoid main()\n{\n    gl_Position = vec4(position, 1.0);\n}\n",fragmentShader:"\n        uniform float uAlpha;\n\n        void main()\n        {\n            gl_FragColor = vec4(0.0, 0.0, 0.0, uAlpha);\n        }\n"}}},{key:"setMaterial",value:function(){this.material=new r.jyz(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},s=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(s=s.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),s.forEach((function(t){H(e,t,n[t])}))}return e}({},this.textures,{transparent:!0}))}},{key:"setMesh",value:function(){this.mesh=new r.Kj0(this.geometry,this.material),this.scene.add(this.mesh)}}])&&I(t.prototype,n),s&&I(t,s),e}();function D(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function U(e,t,n){return(U=D()?Reflect.construct:function(e,t,n){var s=[null];s.push.apply(s,t);var i=new(Function.bind.apply(e,s));return n&&G(i,n.prototype),i}).apply(null,arguments)}function W(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function N(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function G(e,t){return(G=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function K(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var X=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.experience=new He,this.scene=this.experience.scene,this.resources=this.experience.resources,this.data=M,this.setGeometry(),this.setTextures(),this.setMaterial(),this.setMesh()}var t,n,s;return t=e,(n=[{key:"setGeometry",value:function(){this.geometry=U(r.xo$,K(this.data.sizes.background))}},{key:"setTextures",value:function(){this.textures={},this.textures.color=this.data.colors.background}},{key:"setMaterial",value:function(){this.material=new r.vBJ(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},s=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(s=s.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),s.forEach((function(t){N(e,t,n[t])}))}return e}({},this.textures,{side:r._Li}))}},{key:"setMesh",value:function(){this.mesh=new r.Kj0(this.geometry,this.material),this.scene.add(this.mesh)}}])&&W(t.prototype,n),s&&W(t,s),e}();function J(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function Z(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var $=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.experience=new He,this.scene=this.experience.scene,this.resources=this.experience.resources,this.physics=this.experience.physics,this.setGeometry(),this.setTextures(),this.setMaterial(),this.setMesh()}var t,n,s;return t=e,(n=[{key:"setGeometry",value:function(){this.geometry=new r.zf8(32,64)}},{key:"setTextures",value:function(){this.textures={},this.textures.map=this.resources.items.cliffAlbedo,this.textures.map.encoding=r.knz,this.textures.map.repeat.set(1.5,1.5),this.textures.map.wrapS=r.rpg,this.textures.map.wrapT=r.rpg,this.textures.displacementMap=this.resources.items.cliffDisplacement,this.textures.displacementMap.repeat.set(1.5,1.5),this.textures.displacementMap.wrapS=r.rpg,this.textures.displacementMap.wrapT=r.rpg,this.textures.normalMap=this.resources.items.cliffNormal,this.textures.normalMap.repeat.set(1.5,1.5),this.textures.normalMap.wrapS=r.rpg,this.textures.normalMap.wrapT=r.rpg,this.textures.roughnessMap=this.resources.items.cliffRoughness,this.textures.roughnessMap.repeat.set(1.5,1.5),this.textures.roughnessMap.wrapS=r.rpg,this.textures.roughnessMap.wrapT=r.rpg}},{key:"setMaterial",value:function(){this.material=new r.Wid(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},s=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(s=s.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),s.forEach((function(t){Z(e,t,n[t])}))}return e}({},this.textures))}},{key:"setMesh",value:function(){this.mesh=new r.Kj0(this.geometry,this.material),this.mesh.rotation.x=.5*-Math.PI,this.mesh.receiveShadow=!0,this.scene.add(this.mesh)}}])&&J(t.prototype,n),s&&J(t,s),e}(),q=n(8520),V=n.n(q);function Y(e,t,n,s,i,r,a){try{var o=e[r](a),c=o.value}catch(l){return void n(l)}o.done?t(c):Promise.resolve(c).then(s,i)}function Q(e){return function(){var t=this,n=arguments;return new Promise((function(s,i){var r=e.apply(t,n);function a(e){Y(r,s,i,a,o,"next",e)}function o(e){Y(r,s,i,a,o,"throw",e)}a(void 0)}))}}function ee(e,t,n){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return n}function te(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function ne(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var se=new WeakSet,ie=new WeakSet,re=new WeakSet,ae=new WeakSet,oe=new WeakSet,ce=new WeakSet,le=new WeakSet,ue=new WeakSet,he=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),se.add(this),ie.add(this),re.add(this),ae.add(this),oe.add(this),ce.add(this),le.add(this),ue.add(this),this.experience=new He,this.scene=this.experience.scene,this.resources=this.experience.resources,this.canvas=this.experience.canvas,this.camera=this.experience.camera,this.time=this.experience.time,this.debug=this.experience.debug,this.objects=[],this.vertices=[],this.matrix=new r.yGw,this.color=new r.Ilk,this.index=0,this.animateLoad=!0,this.multiColored=!0,this.beadType=M.beadType.sphere,this.debug.active&&(this.debugFolder=this.debug.ui.addFolder("beads")),this.setMaterial(),ee(this,ie,de).call(this),this.object=this.resources.items.handModel,this.createMesh(this.object),this.setEventListeners()}var t,s,i;return t=e,(s=[{key:"setGeometry",value:function(e,t){return t===M.beadType.box?new r.DvJ(e,e,e):t===M.beadType.tetrahedron?new r.H$k(e):new r.xo$(e,10,10)}},{key:"setMaterial",value:function(){this.material=new r.Wid({precision:"lowp",metalness:1,roughness:0,color:"#ffffff"})}},{key:"createMesh",value:function(e){for(var t=ee(this,se,fe).call(this,e,"position"),n=new r.yGw,s=new r.Ilk,i=0,a=0,o=[],c=0;c<t.array.length;c+=3)o.push([t.array[c],t.array[c+1],t.array[c+2]]);var l=function(e){return e.length<1e4?e:l(e.filter((function(e,t){return t%2===0})))};o=l(o);for(var u=0;u<o.length;u++)0!==u&&o[u][1]<i&&(i=o[u][1]),0!==u&&o[u][1]>a&&(a=o[u][1]);var h=a-i,f=6/h,d=.01*h,p=f*(h/2),m=-h,v=this.setGeometry(d,this.beadType);this.mesh=new r.SPe(v,this.material,o.length),this.mesh.instanceMatrix.setUsage(r.dj0);for(var y=0;y<o.length;y++){var b;this.animateLoad?this.mesh.setMatrixAt(y,n.setPosition(o[y][0],m,o[y][2])):this.mesh.setMatrixAt(y,(b=n).setPosition.apply(b,ne(o[y]))),this.multiColored?this.mesh.setColorAt(y,s.setHex(16777215*Math.random())):this.mesh.setColorAt(y,s.setHex(16777215))}this.vertices=o,this.mesh.scale.set(f,f,f),this.mesh.position.set(0,p,0),this.scene.add(this.mesh),this.objects.push(this.mesh)}},{key:"resetMesh",value:function(){var e=!0,t=!1,n=void 0;try{for(var s,i=this.objects[Symbol.iterator]();!(e=(s=i.next()).done);e=!0){var r=s.value;this.scene.remove(r)}}catch(a){t=!0,n=a}finally{try{e||null==i.return||i.return()}finally{if(t)throw n}}this.objects=[],this.mesh=null,this.index=0}},{key:"setEventListeners",value:function(){var e=this,t=this;document.addEventListener("dragover",(function(e){e.preventDefault(),e.dataTransfer.dropEffect="copy"}),!1),document.addEventListener("drop",(function(t){t.preventDefault(),"text/plain"!==t.dataTransfer.types[0]&&t.dataTransfer.files&&e.loadFiles(t.dataTransfer.files)}),!1),this.meshEventHandler=ee(this,re,pe).bind(this),this.animateHandler=ee(this,oe,ve).bind(this),this.resetMeshEventHandler=ee(this,ce,ye).bind(this),this.colorEventHandler=ee(this,le,be).bind(this),this.beadTypeHandler=ee(this,ue,ge).bind(this),this.createMeshButton=document.getElementById("create-mesh"),this.animateButton=document.getElementById("animate"),this.resetMeshButton=document.getElementById("reset-mesh"),this.beadTypeButton=document.getElementById("bead-type"),this.colorButton=document.getElementById("color-type"),this.fileUploadButton=document.getElementById("file-upload"),this.animateButton.addEventListener("click",this.animateHandler),this.resetMeshButton.addEventListener("click",this.resetMeshEventHandler),this.colorButton.addEventListener("click",this.colorEventHandler),this.beadTypeButton.addEventListener("change",this.beadTypeHandler),this.fileUploadButton.addEventListener("change",(function(e){return e.target.files&&t.loadFiles(e.target.files)}))}},{key:"loadFiles",value:function(e){if(e.length>0){var t=function(e){for(var t={},n=0;n<e.length;n++){var s=e[n];t[s.name]=s}return t}(e);this.manager=new r.lLk,this.manager.setURLModifier((function(e){e=e.replace(/^(\.?\/)/,"");var n=t[e];return n?URL.createObjectURL(n):e}));for(var n=0;n<e.length;n++)this.loadFile(e[n],this.manager)}}},{key:"loadFile",value:function(e,t){var s=this,i=e.name,r=i.split(".").pop().toLowerCase(),a=new FileReader;switch(r){case"fbx":a.addEventListener("load",function(e){var i=Q(V().mark((function e(i){var r,a,o,c;return V().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=i.target.result,e.next=3,Promise.resolve().then(n.bind(n,1411));case 3:a=e.sent.FBXLoader,o=new a(t),c=o.parse(r),this.object=c,s.resetMesh(),s.createMesh(c),ee(s,ae,me).call(this);case 10:case"end":return e.stop()}}),e,this)})).bind(this));return function(){return i.apply(this,arguments)}}(),!1),a.readAsArrayBuffer(e);break;case"obj":a.addEventListener("load",Q(V().mark((function e(t){var r,a,o;return V().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.target.result,e.next=3,Promise.resolve().then(n.bind(n,7011));case 3:a=e.sent.OBJLoader,(o=(new a).parse(r)).name=i,this.object=o,s.resetMesh(),s.createMesh(o),ee(s,ae,me).call(this);case 10:case"end":return e.stop()}}),e,this)})).bind(this)).bind(this),!1),a.readAsText(e);break;default:console.error("Unsupported file format ("+r+").")}}},{key:"update",value:function(){var e,t=new r.yGw;this.animateLoad&&this.mesh&&this.index<this.vertices.length&&(this.mesh.setMatrixAt(this.index,(e=t).setPosition.apply(e,ne(this.vertices[this.index]))),this.mesh.instanceMatrix.needsUpdate=!0,this.index++)}}])&&te(t.prototype,s),i&&te(t,i),e}();function fe(e,t){var n=0;e.traverse((function(e){if(e.isMesh){var s=e.geometry.attributes[t];n+=s.array.length}}));var s=new Float32Array(n),i=0;return e.traverse((function(e){if(e.isMesh){var n=e.geometry.attributes[t];s.set(n.array,i),i+=n.array.length}})),new r.TlE(s,3)}function de(){if(this.debug.active){var e=this,t=this,n=this,s={Hand:function(){e.resetMesh(),e.createMesh(e.resources.items.handModel)},SkullModel:function(){t.resetMesh(),t.createMesh(t.resources.items.skullModel)},Remove:function(){return n.resetMesh()}};this.debugFolder.add(s,"Hand"),this.debugFolder.add(s,"SkullModel"),this.debugFolder.add(s,"Remove")}}function pe(){this.createMesh(this.object),ee(this,ae,me).call(this)}function me(){this.createMeshButton.style.background=M.colors.inactiveButton,this.resetMeshButton.style.background=M.colors.activeButton,this.createMeshButton.removeEventListener("click",this.meshEventHandler),this.resetMeshButton.addEventListener("click",this.resetMeshEventHandler)}function ve(){this.animateLoad=!this.animateLoad,this.animateButton.style.background=this.animateLoad?M.colors.activeButton:M.colors.inactiveButton,this.animateButton.style.color=this.animateLoad?M.colors.activeText:M.colors.inactiveText,this.animateButton.innerHTML=this.animateLoad?M.buttons.animateOn:M.buttons.animateOff,ee(this,ae,me).call(this),this.resetMesh(),this.createMesh(this.object)}function ye(){this.resetMesh(),this.animateLoad=!1,this.resetMeshButton.removeEventListener("click",this.resetMeshEventHandler),this.createMeshButton.addEventListener("click",this.meshEventHandler),this.resetMeshButton.style.background=M.colors.inactiveButton,this.createMeshButton.style.background=M.colors.activeButton}function be(){this.multiColored=!this.multiColored,this.colorButton.style.background=this.multiColored?M.colors.activeButton:M.colors.inactiveButton,this.colorButton.style.color=this.multiColored?M.colors.activeText:M.colors.inactiveText,this.colorButton.innerHTML=this.multiColored?M.buttons.colorTypeOn:M.buttons.colorTypeOff,ee(this,ae,me).call(this),this.resetMesh(),this.createMesh(this.object)}function ge(e){var t=e.target.selectedIndex,n=e.target[t].value;this.beadType=n,ee(this,ae,me).call(this),this.resetMesh(),this.createMesh(this.object)}function we(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}var xe=function(){function e(){var t=this,n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.experience=new He,this.scene=this.experience.scene,this.loadingScreen=new F,this.resources=this.experience.resources,this.loadingBarElement=document.getElementById("loading-bar"),this.controlsContainer=document.getElementById("controls-container"),this.hideControls=document.getElementById("hide-controls"),this.loadingBarElement.style.position="absolute",this.loadingBarElement.style.top="50%",this.loadingBarElement.style.width="100%",this.loadingBarElement.style.height="2px",this.loadingBarElement.style.background="#ffffff",this.loadingBarElement.style.transformOrigin="top left",this.loadingBarElement.style.transform="scaleX(0)",this.resources.manager.onLoad=function(){t.controlsContainer.style.opacity=1,t.hideControls.style.opacity=1,t.loadingBarElement.style.transform="scaleX(0)",t.loadingBarElement.style.transformOrigin="100% 0",t.background=new X,t.floor=new $,t.beads=new he,t.environment=new _},this.resources.manager.onProgress=function(e,t,s){var i=t/s;n.loadingBarElement.style.transform="scaleX(".concat(i,")")}}var t,n,s;return t=e,(n=[{key:"update",value:function(){this.beads&&this.beads.update()}}])&&we(t.prototype,n),s&&we(t,s),e}(),ke=n(7011),Me=n(1411);function je(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function Ee(e){return(Ee=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Oe(e,t){return!t||"object"!==Be(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Pe(e,t){return(Pe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Be=function(e){return e&&"undefined"!==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function Le(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,s=Ee(e);if(t){var i=Ee(this).constructor;n=Reflect.construct(s,arguments,i)}else n=s.apply(this,arguments);return Oe(this,n)}}var Te=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Pe(e,t)}(a,e);var t,n,s,i=Le(a);function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=i.call(this)).sources=e,t.items={},t.toLoad=t.sources.length,t.loaded=0,t.manager=new r.lLk,t.setLoaders(),t.startLoading(),t}return t=a,(n=[{key:"setLoaders",value:function(){this.loaders={},this.loaders.objLoader=new ke.OBJLoader(this.manager),this.loaders.fbxLoader=new Me.FBXLoader(this.manager),this.loaders.textureLoader=new r.dpR(this.manager),this.loaders.cubeTextureLoader=new r.cBK(this.manager)}},{key:"startLoading",value:function(){var e=!0,t=!1,n=void 0;try{for(var s,i=this,r=function(e,t){var n=t.value;if("objModel"===n.type){var s=i;i.loaders.objLoader.load(n.path,(function(e){s.sourceLoaded(n,e)}))}else if("fbxModel"===n.type){var r=i;i.loaders.fbxLoader.load(n.path,(function(e){r.sourceLoaded(n,e)}))}else if("texture"===n.type){var a=i;i.loaders.textureLoader.load(n.path,(function(e){a.sourceLoaded(n,e)}))}else if("cubeTexture"===n.type){var o=i;i.loaders.cubeTextureLoader.load(n.path,(function(e){o.sourceLoaded(n,e)}))}},a=this.sources[Symbol.iterator]();!(e=(s=a.next()).done);e=!0)r(0,s)}catch(o){t=!0,n=o}finally{try{e||null==a.return||a.return()}finally{if(t)throw n}}}},{key:"sourceLoaded",value:function(e,t){this.items[e.name]=t,this.loaded++,this.loaded===this.toLoad&&this.trigger("ready")}}])&&je(t.prototype,n),s&&je(t,s),a}(c),Se=n(7637);var Ce=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.active="#debug"===window.location.hash,this.active&&(this.ui=new Se.ZP)},Re=n(6698),ze="".concat(Re.FH,"/assets/static-alastair/"),_e=[{name:"cliffAlbedo",type:"texture",path:"".concat(ze,"textures/cliff/cliff_Albedo.jpg")},{name:"cliffDisplacement",type:"texture",path:"".concat(ze,"textures/cliff/cliff_Displacement.jpg")},{name:"cliffNormal",type:"texture",path:"".concat(ze,"textures/cliff/cliff_Normal.jpg")},{name:"cliffRoughness",type:"texture",path:"".concat(ze,"textures/cliff/cliff_Roughness.jpg")},{name:"lensflare0_Alpha",type:"texture",path:"".concat(ze,"textures/lensflare/lensflare0_alpha.png")},{name:"lensflare0",type:"texture",path:"".concat(ze,"textures/lensflare/lensflare0.png")},{name:"lensflare1",type:"texture",path:"".concat(ze,"textures/lensflare/lensflare1.png")},{name:"handModel",type:"objModel",path:"".concat(ze,"models/hand/hand.obj")},{name:"studioLights",type:"fbxModel",path:"".concat(ze,"models/studio_lights.fbx")},{name:"skullModel",type:"objModel",path:"".concat(ze,"models/skull.obj")},{name:"environmentMapTexture",type:"cubeTexture",path:["".concat(ze,"textures/envMap/0/px.jpg"),"".concat(ze,"textures/envMap/0/nx.jpg"),"".concat(ze,"textures/envMap/0/py.jpg"),"".concat(ze,"textures/envMap/0/ny.jpg"),"".concat(ze,"textures/envMap/0/pz.jpg"),"".concat(ze,"textures/envMap/0/nz.jpg")]}];function Ae(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}var Ie=null,He=function(){function e(t,n){var s=void 0!==n&&n,i=this,a=this;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Ie&&!1===s)return Ie;Ie=this,document.getElementById("controls-container").style.opacity=0,document.getElementById("hide-controls").style.opacity=0,this.canvas=t,this.debug=new Ce,this.sizes=new p,this.time=new x,this.scene=new r.xsS,this.resources=new Te(_e),this.camera=new E,this.renderer=new S,this.world=new xe,this.sizes.on("resize",(function(){i.resize()})),this.time.on("tick",(function(){a.update()}))}var t,n,s;return t=e,(n=[{key:"resize",value:function(){this.camera.resize(),this.renderer.resize()}},{key:"update",value:function(){this.camera.update(),this.world.update(),this.renderer.update()}},{key:"destroy",value:function(){this.sizes.off("resize"),this.time.off("tick"),this.scene.traverse((function(e){if(s=e,null!=(i=r.Kj0)&&"undefined"!==typeof Symbol&&i[Symbol.hasInstance]?i[Symbol.hasInstance](s):s instanceof i)for(var t in e.geometry.dispose(),e.material){var n=e.material[t];n&&"function"===typeof n.dispose&&n.dispose()}var s,i})),this.camera.controls.dispose(),this.renderer.instance.dispose(),this.debug.active&&this.debug.ui.destroy()}}])&&Ae(t.prototype,n),s&&Ae(t,s),e}();var Fe=function(){var e=(0,i.useRef)(null);return(0,i.useEffect)((function(){var t=new He(e.current,!0);return function(){t.destroy()}}),[]),(0,s.jsx)("canvas",{ref:e})}}}]);
//# sourceMappingURL=132-aea3ca068428c1fa.js.map